<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>函数的扩展</title>
</head>
<body>
<script>
  function log(x, y = 'world') {
    console.log(x+','+y)
  }

  log('hello')
  log('', '1111')
  log('hello', '')


  function point(x =0, y=0) {
    this.x = x;
    this.y = y;
  }

  let p = new point()
  console.log(p)

  let x = 99;
  function fun(p = x+1) {
    console.log(p)
  }
  fun()
  fun()

  function foo({x, y=1}) {
    console.log(x, y)
  }
  foo({})


  function m1({x=0, y=1} = {}) {
    console.log([x, y])
  }
  function m2({x, y} = {x: 0, y: 2}) {
    console.log([x, y])
  }
  m1({})
  m2({})

  console.log((function(a,b=undefined,c){}).length)
  console.log((function(...args){}).length)

  var f = function(){}
  console.log(f.name)

//  箭头函数
  function arrow() {
    setTimeout(() => {
      console.log('id', this.id)
    })
  }

  var id = '111'
  arrow.call({id: 222})

  // function Timer() {
  //   this.s1 = 0
  //   this.s2 = 0
  //   setInterval(() => this.s1++, 1000);
  //
  //   setInterval(function() {
  //     this.s2++;
  //   }, 1000)
  // }
  // var timer = new Timer()
  // setTimeout(() => console.log('s1', timer.s1), 3100)
  // setTimeout(() => console.log('s2', timer.s2), 3100)

  // es6箭头函数转为es5的代码
  // ES6
  function foo() {
    setTimeout(() => {
      console.log('id:', this.id);
    }, 100);
  }
  // ES5
  function foo() {
    var _this = this;
    setTimeout(function () {
      console.log('id:', _this.id);
    }, 100);
  }

  const pipeline = (...funcs) =>
      (
        val => (
            funcs.reduce((a,b) => b(a), val)
        )

  )

  const plus1 = a => a+1;
  const mult2 = a => a *2;
  const addThenMult = pipeline(plus1, mult2);
  console.log(addThenMult(5))
  console.log(mult2(plus1(5)))





</script>
</body>
</html>
